#!/usr/bin/env node
var app = require('../app');

app.set('port', process.env.PORT || 3000);

// var server = app.listen(app.get('port'), function() {
//   console.log('Express server listening on port ' + server.address().port);
// });

var server = require('http').createServer(app);
var io = require('socket.io')(server);
app.io = io;

server.listen(app.get('port'), function() {
  console.log('Express server listening on port ' + server.address().port);


  io.on('connection',function (client) {

    console.log('Client connected',client.id);
		client.on('disconnect',function () {
			console.log('Client disconnected');
		});

		client.on('join',function (data) {
			console.log('Client joined: ', data);
		})

		client.on('data',function (data) {
			console.log('Client emitted: ', data);
		})

	});

});
